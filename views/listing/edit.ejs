<%- include('../partials/header.ejs') %>
<main class="edit-page container">
    <form method="POST" action="/listings/<%= listing._id %>?_method=PUT" class="edit-form" enctype="multipart/form-data">

        <label for="condition">Condition:</label>
        <select id="condition" name="condition" required>
            <option value="<%= listing.condition %>"><%= listing.condition %> (current)</option>
            <option value="New">New</option>
            <option value="Like New">Like New</option>
            <option value="Good">Good</option>
            <option value="Fair">Fair</option>
            <option value="Poor">Poor</option>
        </select>

        <label for="title">Title:</label>
        <input type="text" id="title" name="title" value="<%= listing.title %>" required>

        <label for="price">Price:</label>
        <input type="number" id="price" name="price" value="<%= listing.price %>" min="0" step="0.01" required>

        <label for="details">Details:</label>
        <textarea id="details" name="details" rows="4" required><%= listing.details %></textarea>

        <label for="seller">Seller:</label>
        <input type="text" id="seller" name="seller" value="<%= listing.seller %>" required>

        <label for="image">Current Image:</label>
        <div class="current-image">
            <% if (listing.imageUrl) { %>
                <img src="<%= listing.imageUrl %>" alt="Current listing image" class="item-image">
            <% } else { %>
                <p>No image available</p>
            <% } %>
        </div>

        <label for="image">Replace Image (optional):</label>
        <input type="file" id="image" name="image" accept="image/*">

        <button type="submit" class="submit-btn">Submit</button>
    </form>
</main>
<%- include('../partials/footer.ejs') %>